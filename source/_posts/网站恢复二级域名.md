---
title: 网站恢复二级域名
thumbnail: https://ws1.sinaimg.cn/large/902eb75fgy1fwg93kcatdj20rr0b40wj.jpg
abbrlink: 5cf6b291
date: 2018-10-21 14:27:06
toc: true
---
某天突然收到七牛发送的邮件，提醒我系统即将收回测试域名时，我就一直在思考如何处理由此引发的一系列问题，顺便再好好规划下网站以后的定位。今晚，我终于作出了决定并付诸了行动。
<!--more-->
## 七牛测试域名被回收

实际上我在七牛云注册过两个测试域名，一个是http另一个是https，而前者早在之前就被回收了，没想到后面这个一直在付费的域名也会被回收。
![](https://ws1.sinaimg.cn/large/902eb75fgy1fwg7yapzeyj20tb12176l.jpg)
根据七牛云的规定，自定义域名必须进行备案，这意味着我将不能再使用七牛云的图床和CDN加速。

### 回归二级域名

在这个时候我意识到，越来越多的平台需要备案域名，自定义域名反而成为了一种负担，这与我创建静态博客的初衷背道而驰，于是我决定回归到二级域名。
依然是使用Coding提供的Pages服务，即从：

```
www.tiexo.cn ==> tiexo.coding.me
```

### 使用Cloud Studio管理Hexo

最近Coding将自己卖身给了腾讯云，于是我又开始使用Cloud Studio来管理Hexo，其实就是网站之前介绍过的WebIDE。
当然，之所以这么做的一个主要原因是，解决多平台管理的繁琐流程，况且每次电脑重装系统后又要重新安装Git、Hexo让我烦不胜烦。
![](https://ws1.sinaimg.cn/large/902eb75fgy1fwg8dm0gvcj21h50obwoy.jpg)
如果它保持不收费的话，我必须推荐给大家。

### 解决的问题

这次修改网站，中间也遇到了不少问题，例如：

- **cloud studio推送后网站不更新**

明明在仓库中看到推送成功，源文件也更新了，但网站页面一直没变化。
为此我还找coding反馈过，但是并没有解决这个问题。
今晚我突然发现，当我使用`hexo d`推送后，竟然整个hexo目录出现在`coding-pages`分支，按道理应该`git push`命令才会如此。
最后是手动将delopy和public两个文件夹删除，重新推送就好了...可能是某次同步分支时错乱导致的。

- **CDN资源引用地址变更**

之前我都是将图片、JS和CSS文件直接上传到七牛云空间，然后引用外链生效，但七牛域名回收后必须将资源取回来。
好在测试域名虽然回收了，但之前上传的图片资源并没有失效，因此只要把CS和JS文件地址解决就行。
中间碰到的问题主要是，JS和CSS文件引用的相对路径，最终解决方案是分别扔到主题`source/css`和`/js`文件夹中。

- **页面布局**

在最开始，我是打算将网站改成单页布局，但实际效果并不满意，无奈自己不懂CSS只能放弃了。
目前我心中比较满意的是微博头条文章的布局，可惜没看到类似的主题。

- **百度**

包括百度统计和百度站长平台都需要修改配置，其中站长平台的`网站改版`还没弄好，因为之前直接将自定义域名解绑了，审核没通过，待会儿再试试。

### 网站定位

之前本站都是以分享教程和记录折腾日记为主，但是今年来折腾的少，所以许久都没更新。
以后决定把自己的一些评论和总结都搬过来，因为受不了百度贴吧的删帖啦~

最后，希望自己能加油更新，不忘初心！