---
title: 利用M3U8原理下载网页在线视频
banner: 'https://ws1.sinaimg.cn/large/902eb75fgy1fkuvi4o764j20rs0b5jtw.jpg'
abbrlink: 4b12741d
date: 2017-10-25 22:41:03
---
之前给我妈下载广场舞视频的时候就折腾过一次，当时主要利用视频嗅探工具，如硕鼠和猎影之类的。
但这个方法容易失效并且很多网站不适用，所以给大家介绍一个新的原理。
<!--more-->

# M3U8

根据我的理解，在移动端进行网页视频播放时，网站加载一个m3u8文件，然后浏览器根据这个文件去请求视频地址。
也就是说，m3u8里面包含了视频的原地址信息，通过一些软件可以进行解析和下载。

所以第一步就是找到m3u8文件，其中最关键的信息是`移动端`播放视频
我们打开浏览器F12工具（以360极速浏览器为例）

访问需要下载的视频网页，点击左上角模拟为移动设备

![](https://ws1.sinaimg.cn/large/902eb75fgy1fkuuxi3enuj20px06bwf1.jpg)

然后切换至`Network`栏，刷新一下网页
在加载的请求中找到`Media`一项就是m3u8文件了

![](https://ws1.sinaimg.cn/large/902eb75fgy1fkuv0qicytj21h807wwfl.jpg)

需要注意的是：视频必须处于播放状态，这样浏览器才会加载这个请求
然后右键复制这个网址即可，这样我们就获取了m3u8的链接。

# FFmpeg

接下来就是下载视频，我们通过ffmpeg这个软件来实现。
由于这是个命令行工具，因此另外推荐一款基于它开发的图形化软件，操作更加便捷。

> 下载地址：[github](https://github.com/nilaoda/The-New-M3U8-Downloader/releases/download/1.0/M3U8.Downloader_1.0.7z)

解压后只有一个绿色版文件，我们将上文提取的m3u8链接粘贴进去即可

![](https://ws1.sinaimg.cn/large/902eb75fgy1fkuv88z9i2j20zu0e742l.jpg)

当然你可以自定义文件名字和格式，点击下载等待完成就行了

我稍微测试了几个网站，整个过程都非常流畅，应该是全能的方法吧！
有兴趣的可以收藏试试~

